# Placer
Лабораторная работа по курсу "Решение задач с семантическим разрывом"<p>
***
## Постановка задачи
Начальные данные: на вход подается фотография, на которой изображены различные предметы на белом листе А4 на горизонтальной поверхности, а также один из видов многоугольника. Заранее известны предметы и многоугольник. Необходимо по заданным предметам определить можно ли расположить их внутри многоугольника.  
### Требования к входным данным
##### Фотометрические
- Допустимые форматы фотографий: .jpeg, .png 
- Высота съемки: 25 - 40 см. от уровня листа
- Критерий размытости: толщина линии границы объектов не более 7 пикселей
- Допустимое разрешение фотографий: 2048 х 1536 пикселей

##### По расположению объектов на фотографии
- Многоугольник подается на вход отдельно от предметов, причем он должен быть нарисован черной ручкой на белом листе бумаги А4 и никакая из его сторон не пересекает другую
- Предметы не должны перекрывать друг друга и выходить за границы листа (в том числе перекрывать их на фотографии) 
- Один предмет не может присутствовать на фотографии несколько раз
- Число вершин многоугольника неограничено при условии, что все вершины можно отделить друг от друга
- Предметы можно поворачивать вокруг оси Z, где Z - ось, перпендикулярная плоской поверхности, на которой расположен белый лист

### Требования к выходным данным
- После завершения работы алгоритма в выходной файл формата .txt построчно записывается информация о каждом пройденном кейсе в виде:
входные данные (название файла); многоугольник (название файла);результат алгоритма: True или False, где True означает, что заданные предметы можно разместить в многоугольнике, False - нельзя разместить предметы в многоугольнике
***
## План решения задачи

#### Работа с изображениями
- Понижаем размерность изображения тем самым ускоряем алгоритм
- Преобразовываем изображение из RGB в оттенки серого с помощью rgb2gray для дальнейшего поиска границ
- Определяем границы листа А4 и убираем ту часть изображения, что находится за границей
#### Работа с многоугольником 
- Определяем границы многоугольника с помощью метода Canny
- Определяем внутреннюю область многоугольника
- Считаем площадь многоугольника 
#### Работа с предметами
- Применяем предобработку - бинаризацию Оцу, обрезка изображения по границам листа, сокращение размерности
- Применяем морфологические операции закрытия
- Определяем связные области, считаем общую площадь предметов

#### Определение того поместятся ли предметы в многоугольник
- Определяем размеры и площади предметов с помощью областей связности
- Считаем суммарную площадь предметов. Если она меньше или равна площади многоугольника, то выполнено предварительное условие вмещения
- Алгоритм упаковки: основан на переборе. Сначала вычисляем стартовую позицию поиска. Для этого в изображение, содержащее многоугольник (размер изображения соответствует bounding box этого многоугольника) вставляем по очереди в каждый из 4х углов многоугольника один объект из входного изображения и смотрим наибольшее отсечение площади - это и будет стартовой точкой. Далее простой перебор: проходимся по изображению с многоугольником вставляя туда объект с определенным шагом, зависящим от размеров объекта и на каждой позиции вращаем предмет на 180 градусов с дискретой 5 градусов (предметы, по форме похожие на круги не вращаются). Условием того, что предмет полностью поместился в многоугольник является разность их площадей. Предмет встает на первую найденную позицию. Дополнительным условием перед началом попытки размещения предмета является проверка на то, что предмет по длине теоретически может поместиться в многоугольник.
#### Выходной файл
- По окончании алгоритма сформировать выходной файл
