# Placer
Лабораторная работа по курсу "Решение задач с семантическим разрывом"<p>
***
## Постановка задачи
Начальные данные: на вход подается фотография, на которой изображены различные предметы на белом листе А4 на горизонтальной поверхности, а также один из видов многоугольника. Заранее известны предметы и многоугольник. Необходимо по заданным предметам определить можно ли расположить их внутри многоугольника.  
### Требования к входным данным
##### Фотометрические
- Допустимые форматы фотографий: .jpeg, .png 
- Высота съемки: 25 - 40 см. от уровня листа
- Критерий размытости: толщина линии границы объектов не более 7 пикселей
- Допустимое разрешение фотографий: 2048 х 1536 пикселей

##### По расположению объектов на фотографии
- Многоугольник подается на вход отдельно от предметов, причем он должен быть нарисован черной ручкой на белом листе бумаги А4 и никакая из его сторон не пересекает другую
- Предметы не должны перекрывать друг друга и выходить за границы листа (в том числе перекрывать их на фотографии) 
- Один предмет не может присутствовать на фотографии несколько раз
- Число вершин многоугольника неограничено при условии, что все вершины можно отделить друг от друга
- Предметы можно поворачивать вокруг оси Z, где Z - ось, перпендикулярная плоской поверхности, на которой расположен белый лист

### Требования к выходным данным
- После завершения работы алгоритма в выходной файл формата .txt построчно записывается информация о каждом пройденном кейсе в виде:
номер кейса; входные данные через запятую; Результат алгоритма: True или False, где True означает, что заданные предметы можно разместить в многоугольнике, False - нельзя разместить предметы в многоугольнике
***
## План решения задачи

#### Работа с изображениями
- Понижаем размерность изображения тем самым ускоряем алгоритм
- Преобразовываем изображение из RGB в оттенки серого с помощью rgb2gray для дальнейшего поиска границ
- Применяем GaussianBlur для сглаживания
- Определяем границы листа А4 с помощью метода Canny и убираем ту часть изображения, что находится за границей
#### Работа с многоугольником 
- Определяем границы многоугольника с помощью метода Canny
- Определяем внутреннюю область многоугольника
- Считаем площадь многоугольника 
#### Работа с предметами
- Применяем предобработку - бинаризацию Оцу
- Применяем морфологические операции
- Выполняем алгоритм Distance transform, нормализуем результат и выполним пороговое преобразование для получения маркеров
- Сегментируем изображение - алгоритм Watershed
- Ищем особые точки с помощью детектора Харриса (или Блоб детектора)
- Сопоставляем найденный объект с шаблоном
#### Определение того поместятся ли предметы в многоугольник
- Определяем размеры и площади предметов (возможно, с помощью вспомогательных прямоугольников, описывающих предмет)
- Считаем суммарную площадь предметов. Если она меньше или равна площади многоугольника, то выполнено необходимое условие вмещения
 - Для упаковки предметов необходимо найти углы многоугольника по особым точкам. Далее, ищем крайние точки объектов и определяем какие 2 точки относятся к длине, а какие 2 к ширине. Ранжируем предметы по убыванию площади. Берем предмет и приставляем одну из его крайних точек длины к одному из 2х углов, соседних с самым большим углом многоугольника. Проверяем выход за границы многоугольника: если вышли за границу -> поворачиваем на малый угол, получившийся в результате разбиения угла на несколько одинаковых (на сколько разбивать угол - это ситуативно). Когда прошли весь угол, отступаем от него на некоторую малую величину и повторяем действия. Критерий, по которому мы определяем, что это место то самое необходимое - близость крайних точек к границе многоугольника. Таких мест может быть несколько, поэтому мы будем сравнивать суммы расстояний от крайних точек объекта до границы многоугольника и выберем таким образом лучшее место.
#### Выходной файл
- По окончании алгоритма сформировать выходной файл
